"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[126],{86126:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(74094),a=r(27060),s=r(67294),l=r(24558);var i=r(33241),o=r(80986),d=r(89206),c=r(81155),u=r(50202),p=r(46018),m=r(96486),h=r.n(m),v=r(41248),f=r(29874),x=r(85893);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,s=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return s}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const y=function(e){var t,r,n,a=e.row,l=g(s.useState(!1),2),i=l[0],m=l[1],_=g(s.useState(""),2),b=(_[0],_[1],g(s.useState(""),2)),y=b[0],j=b[1],N=g((0,p.X)(),2),w=N[0],k=N[1].isLoading,S=(0,v.I0)(),C=function(){return m(!1)},A=h().includes([5],null===(t=window)||void 0===t||null===(r=t.Laravel)||void 0===r||null===(n=r.user)||void 0===n?void 0:n.role_id),I=function(e){var t={status:e,report_id:null==a?void 0:a.id,admin_comment:y};y&&w(t).unwrap().then((function(t){200===t.status&&(S((0,f.ee)({id:null==a?void 0:a.id,status:e})),document.getElementById("body").style.cursor="default",C())}))},R="approved"===(null==a?void 0:a.status)?"success":"tertiary",V="approved"===(null==a?void 0:a.status)?"Resoved":"pending"===(null==a?void 0:a.status)?"Resove":h().startCase(null==a?void 0:a.status),M="pending"===(null==a?void 0:a.status)?"badge-primary":"approved"===(null==a?void 0:a.status)?"badge-success":"badge-warning";return(0,x.jsxs)("div",{children:[A&&(0,x.jsx)("span",{className:"badge ".concat(M),children:null==a?void 0:a.status}),!A&&(0,x.jsxs)(s.Fragment,{children:[(0,x.jsx)(d.Z,{onClick:function(){return"pending"===(null==a?void 0:a.status)&&void m(!0)},variant:R,className:"denied"===(null==a?void 0:a.status)?"sp1_tasks_tbl_report_btn":"",children:V}),(0,x.jsx)(s.Fragment,{children:(0,x.jsx)(o.Z,{isOpen:i,children:(0,x.jsx)("div",{className:"sp1_modal-content-wrapper",children:(0,x.jsxs)("div",{className:"sp1_modal-panel",children:[(0,x.jsxs)("div",{className:"sp1_modal-head",children:[(0,x.jsx)("div",{className:"sp1_modal-title pl-2",children:(0,x.jsx)("strong",{children:"Report Details"})}),(0,x.jsx)(d.Z,{onClick:C,"aria-label":"ModalClose",variant:"tertiary",className:"sp1_modal-close",children:(0,x.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,x.jsxs)("div",{className:"sp1_modal-body p-3",children:[(0,x.jsx)("div",{className:"ck-editor-holder",children:(0,x.jsx)(c.Z,{onChange:function(e,t){var r=t.getData();j(r)},placeholder:"Write your comment here!"})}),(0,x.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-end py-4",children:(0,x.jsxs)("div",{className:"ml-auto d-flex align-items-center w-fit",style:{gap:"10px"},children:[(0,x.jsx)(u.Z,{variant:"success",title:"Approve & Close",onClick:function(){return I("approved")},isLoading:k,className:"ml-auto mr-2"}),!k&&(0,x.jsx)(u.Z,{title:"Deny & Close",onClick:function(){return I("denied")},isLoading:k,className:"deny_button"})]})})]})]})})})})]})]})};var j=r(57046);function N(){return h().times(5,(function(e){return(0,x.jsxs)("tr",{className:"sp1_tasks_tr",children:[(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"50px",height:"14px",className:"mb-1"})}),(0,x.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,x.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,x.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td",children:[(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"60%",height:"13px",className:"mb-1"})]}),(0,x.jsxs)("td",{className:"sp1_tasks_td",children:[(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,x.jsx)(j.V,{width:"40%",height:"13px",className:"mb-1"})]}),(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})}),(0,x.jsx)("td",{className:"sp1_tasks_td",children:(0,x.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})})]},e)}))}function w(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,s=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw a}}return s}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const A=function(e){var t=e.reports,r=void 0===t?[]:t,o=(e.task,e.search),d=e.tableName,c=void 0===d?"sp1-table":d,u=e.isLoading,p=void 0===u||u,m=k(s.useState(w(r)),2),h=m[0],v=m[1],f=k(s.useState([]),2),g=f[0],b=f[1],j=k(s.useState({pageIndex:0,pageSize:10}),2),S=j[0],C=S.pageIndex,A=S.pageSize,I=j[1],R=s.useMemo((function(){return[{id:"serial_no",header:"Serial No.",accessorKey:"id",cell:function(e){return e.getValue()}},{id:"report_issuer",header:"Report Issuer",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:(0,x.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.added_by),name:null==r?void 0:r.report_issue_added_by,avatar:null==r?void 0:r.report_issue_added_by_avatar})})}},{id:"accountable_individual",header:"Accountable Individual",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:(0,x.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.person),name:null==r?void 0:r.responsible_person_name,avatar:null==r?void 0:r.responsible_person_avatar})})}},{id:"report_reason",header:"Report Reason",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:null==r?void 0:r.reason})}},{id:"report_reason_details",header:"Report Reason Details",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("div",{className:"sp1_ck_content",dangerouslySetInnerHTML:{__html:null==r?void 0:r.comment}})}},{id:"pre_reported",header:"Previously Reported",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)("span",{children:null==r?void 0:r.previousNotedIssue})}},{id:"action",header:"Action",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,x.jsx)(y,{row:r})}}]})),V=k(s.useState(w(R)),1)[0],M=k(s.useState(_.map(V,"id")),2),Z=M[0],L=M[1],O=s.useMemo((function(){return{pageIndex:C,pageSize:A}}),[C,A]);s.useEffect((function(){v(w(r))}),[r]);var D=(0,n.b7)({data:h,columns:V,state:{sorting:g,columnOrder:Z,pagination:O,tableName:c,globalFilter:o},onPaginationChange:I,onSortingChange:b,onColumnOrderChange:L,getCoreRowModel:(0,a.sC)(),getPaginationRowModel:(0,a.G_)(),getFilteredRowModel:(0,a.vL)(),getSortedRowModel:(0,a.tj)()});return(0,x.jsx)("div",{className:"sp1_tasks_table_wrapper sp1_tasks_report_table_wrapper",children:(0,x.jsxs)("table",{className:"sp1_tasks_table sp1_tasks_report_table",children:[(0,x.jsx)("thead",{className:"sp1_tasks_thead",children:D.getHeaderGroups().map((function(e){return(0,x.jsx)("tr",{className:"sp1_tasks_tr",children:e.headers.map((function(e){return(0,x.jsx)(l.d,{header:e,table:D,className:"sp1_tasks_report_th"},e.id)}))},e.id)}))}),(0,x.jsxs)("tbody",{className:"sp1_tasks_tbody",children:[p&&(0,x.jsx)(N,{}),!p&&D.getRowModel().rows.map((function(e){return(0,x.jsx)("tr",{className:"sp1_tasks_tr",children:e.getVisibleCells().map((function(e){return(0,x.jsx)("td",{className:"px-2 sp1_tasks_td sp1_tasks_report_td",children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))]})]})})}}}]);
//# sourceMappingURL=126.js.map