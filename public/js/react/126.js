"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[126],{86126:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(74094),s=r(27060),a=r(67294),l=r(24558);var i=r(33241),o=r(80986),d=r(411),c=r(81155),u=r(50202),p=r(46018),m=r(96486),h=r.n(m),v=r(41248),x=r(29874),f=r(85893);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,s,a=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){i=!0,s=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const b=function(e){var t,r,n,s=e.row,l=_(a.useState(!1),2),i=l[0],m=l[1],g=_(a.useState(""),2),b=(g[0],g[1],_(a.useState(""),2)),j=b[0],y=b[1],N=_((0,p.X)(),2),w=N[0],k=N[1].isLoading,S=(0,v.I0)(),C=function(){return m(!1)},A=h().includes([1],null===(t=window)||void 0===t||null===(r=t.Laravel)||void 0===r||null===(n=r.user)||void 0===n?void 0:n.role_id),I=function(e){var t={status:e,report_id:null==s?void 0:s.id,admin_comment:j};j&&w(t).unwrap().then((function(t){200===t.status&&(S((0,x.ee)({id:null==s?void 0:s.id,status:e})),document.getElementById("body").style.cursor="default",C())}))},V="approved"===(null==s?void 0:s.status)?"success":"tertiary",R="approved"===(null==s?void 0:s.status)?"Resoved":"pending"===(null==s?void 0:s.status)?"Resove":h().startCase(null==s?void 0:s.status),M="pending"===(null==s?void 0:s.status)?"badge-primary":"approved"===(null==s?void 0:s.status)?"badge-success":"badge-warning";return(0,f.jsxs)("div",{children:[!A&&(0,f.jsx)("span",{className:"badge ".concat(M),children:null==s?void 0:s.status}),A&&(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(d.Z,{onClick:function(){return"pending"===(null==s?void 0:s.status)&&void m(!0)},variant:V,className:"denied"===(null==s?void 0:s.status)?"sp1_tasks_tbl_report_btn":"",children:R}),(0,f.jsx)(a.Fragment,{children:(0,f.jsx)(o.Z,{isOpen:i,children:(0,f.jsx)("div",{className:"sp1_modal-content-wrapper",children:(0,f.jsxs)("div",{className:"sp1_modal-panel",children:[(0,f.jsxs)("div",{className:"sp1_modal-head",children:[(0,f.jsx)("div",{className:"sp1_modal-title pl-2",children:(0,f.jsx)("strong",{children:"Report Details"})}),(0,f.jsx)(d.Z,{onClick:C,"aria-label":"ModalClose",variant:"tertiary",className:"sp1_modal-close",children:(0,f.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,f.jsxs)("div",{className:"sp1_modal-body p-3",children:[(0,f.jsx)("div",{className:"ck-editor-holder",children:(0,f.jsx)(c.Z,{onChange:function(e,t){var r=t.getData();y(r)},placeholder:"Write your comment here!"})}),(0,f.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-end py-4",children:(0,f.jsxs)("div",{className:"ml-auto d-flex align-items-center w-fit",style:{gap:"10px"},children:[(0,f.jsx)(u.Z,{variant:"success",title:"Approve & Close",onClick:function(){return I("approved")},isLoading:k,className:"ml-auto mr-2"}),!k&&(0,f.jsx)(u.Z,{title:"Deny & Close",onClick:function(){return I("denied")},isLoading:k,className:"deny_button"})]})})]})]})})})})]})]})};var j=r(57046);function y(){return h().times(5,(function(e){return(0,f.jsxs)("tr",{className:"sp1_tasks_tr",children:[(0,f.jsx)("td",{className:"sp1_tasks_td",children:(0,f.jsx)(j.V,{width:"50px",height:"14px",className:"mb-1"})}),(0,f.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,f.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,f.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,f.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,f.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,f.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,f.jsxs)("td",{className:"sp1_tasks_td",children:[(0,f.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,f.jsx)(j.V,{width:"60%",height:"13px",className:"mb-1"})]}),(0,f.jsxs)("td",{className:"sp1_tasks_td",children:[(0,f.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,f.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,f.jsx)(j.V,{width:"40%",height:"13px",className:"mb-1"})]}),(0,f.jsx)("td",{className:"sp1_tasks_td",children:(0,f.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})}),(0,f.jsx)("td",{className:"sp1_tasks_td",children:(0,f.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})}),(0,f.jsx)("td",{className:"sp1_tasks_td",children:(0,f.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})})]},e)}))}var N=r(96030);function w(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,s,a=[],l=!0,i=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){i=!0,s=e}finally{try{l||null==r.return||r.return()}finally{if(i)throw s}}return a}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const A=function(e){var t=e.reports,r=void 0===t?[]:t,o=(e.task,e.search),d=e.tableName,c=void 0===d?"sp1-table":d,u=e.isLoading,p=void 0===u||u,m=k(a.useState(w(r)),2),v=m[0],x=m[1],_=k(a.useState([]),2),g=_[0],j=_[1],S=k(a.useState({pageIndex:0,pageSize:10}),2),C=S[0],A=C.pageIndex,I=C.pageSize,V=S[1],R=a.useMemo((function(){return[{id:"serial_no",header:"Serial No.",accessorKey:"id",cell:function(e){return e.getValue()}},{id:"report_issuer",header:"Report Issuer",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)("span",{children:(0,f.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.added_by),name:null==r?void 0:r.report_issue_added_by,avatar:null==r?void 0:r.report_issue_added_by_avatar})})}},{id:"accountable_individual",header:"Accountable Individual",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)("span",{children:(0,f.jsx)(i.Z,{url:"/account/employees/".concat(null==r?void 0:r.person),name:null==r?void 0:r.responsible_person_name,avatar:null==r?void 0:r.responsible_person_avatar})})}},{id:"report_reason",header:"Report Reason",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)("span",{children:null==r?void 0:r.reason})}},{id:"report_reason_details",header:"Report Reason Details",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)("div",{className:"sp1_ck_content",dangerouslySetInnerHTML:{__html:null==r?void 0:r.comment}})}},{id:"pre_reported",header:"Previously Reported",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)("span",{children:null==r?void 0:r.previousNotedIssue})}},{id:"action",header:"Action",cell:function(e){var t=e.row,r=null==t?void 0:t.original;return(0,f.jsx)(b,{row:r})}}]})),M=k(a.useState(w(R)),1)[0],Z=k(a.useState(h().map(M,"id")),2),L=Z[0],O=Z[1],D=a.useMemo((function(){return{pageIndex:A,pageSize:I}}),[A,I]);a.useEffect((function(){x(w(r))}),[r]);var E=(0,n.b7)({data:v,columns:M,state:{sorting:g,columnOrder:L,pagination:D,tableName:c,globalFilter:o},onPaginationChange:V,onSortingChange:j,onColumnOrderChange:O,getCoreRowModel:(0,s.sC)(),getPaginationRowModel:(0,s.G_)(),getFilteredRowModel:(0,s.vL)(),getSortedRowModel:(0,s.tj)()});return(0,f.jsxs)("div",{className:"sp1_tasks_table_wrapper sp1_tasks_report_table_wrapper",children:[(0,f.jsxs)("table",{className:"sp1_tasks_table sp1_tasks_report_table",children:[(0,f.jsx)("thead",{className:"sp1_tasks_thead",children:E.getHeaderGroups().map((function(e){return(0,f.jsx)("tr",{className:"sp1_tasks_tr",children:e.headers.map((function(e){return(0,f.jsx)(l.d,{header:e,table:E,className:"sp1_tasks_report_th"},e.id)}))},e.id)}))}),(0,f.jsxs)("tbody",{className:"sp1_tasks_tbody",children:[p&&(0,f.jsx)(y,{}),!p&&E.getRowModel().rows.map((function(e){return(0,f.jsx)("tr",{className:"sp1_tasks_tr",children:e.getVisibleCells().map((function(e){return(0,f.jsx)("td",{className:"px-2 sp1_tasks_td sp1_tasks_report_td",children:(0,n.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))]})]}),!p&&0===h().size(v)&&(0,f.jsx)(N.Z,{})]})}}}]);
//# sourceMappingURL=126.js.map