"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[90],{81155:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(67294),a=n(3813),i=n(69238),s=n.n(i);function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loader=t}var t,n,r;return t=e,(n=[{key:"upload",value:function(){var e=this;return this.loader.file.then((function(t){return new Promise((function(n,r){e._initRequest(),e._initListeners(n,r,t),e._sendRequest(t)}))}))}},{key:"abort",value:function(){this.xhr&&this.xhr.abort()}},{key:"_initRequest",value:function(){var e=this.xhr=new XMLHttpRequest;e.open("POST","/upload",!0),e.setRequestHeader("X-CSRF-TOKEN",$('meta[name="csrf-token"]').attr("content")),e.responseType="json"}},{key:"_initListeners",value:function(e,t,n){var r=this.xhr,a=this.loader,i="Couldn't upload file: ".concat(n.name,".");r.addEventListener("error",(function(){return t(i)})),r.addEventListener("abort",(function(){return t()})),r.addEventListener("load",(function(){var n=r.response;if(!n||n.error)return t(n&&n.error?n.error.message:i);e({default:n.filename})})),r.upload&&r.upload.addEventListener("progress",(function(e){e.lengthComputable&&(a.uploadTotal=e.total,a.uploaded=e.loaded)}))}},{key:"_sendRequest",value:function(e){var t=new FormData;t.append("image",e),this.xhr.send(t)}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();const d=function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new o(e)}};var u=n(85893);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e){var t=this,n=e.data,i=void 0===n?"":n,l=e.onChange,o=e.placeholder,p=void 0===o?"Type the content here!":o,h=c(r.useState(null),2),m=(h[0],h[1]);return(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(a.CKEditor,{onReady:function(e){var t;null===(t=e.ui.getEditableElement())||void 0===t||t.parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement()),m(e)},onError:function(e,n){n.willEditorRestart&&t.editor.ui.view.toolbar.element.remove()},onChange:function(e,t){return l?l(e,t):null},editor:s(),data:i,config:{extraPlugins:[d],placeholder:p,toolbar:["undo","redo","|","heading","|","bold","italic",{label:"More basic styles",icon:"text",items:["underline","strikethrough","blockQuote","alignment","fontColor","fontBackgroundColor,"]},"|",{label:"List",icon:!1,items:["bulletedList","numberedList","indent","outdent"]},"|","link",{label:"Insert",icon:"plus",items:["imageUpload","mediaEmbed","insertTable"]}],image:{toolbar:["imageStyle:inline","imageStyle:block","imageStyle:side","|","toggleImageCaption","imageTextAlternative","ImageResize"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]}}})})}},49090:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(74094),a=n(27060),i=n(67294),s=n(24558);var l=n(33241),o=n(95595),d=n(89206),u=n(81155),c=n(85893);const p=function(e){var t=e.onClick,n=e.isLoading,r=e.className,a=e.variant,s=void 0===a?"primary":a,l=e.children,o=e.title,u=document.querySelector("#body");return i.useEffect((function(){u.style.cursor=n?"progress":"default"}),[n]),(0,c.jsx)(i.Fragment,{children:n?(0,c.jsxs)("div",{className:"cursor-processing cnx__btn cnx__btn_sm cnx__btn_primary",children:[(0,c.jsx)("div",{className:"spinner-border text-white",role:"status",style:{width:"18px",height:"18px"}}),"Processing..."]}):(0,c.jsx)(d.Z,{variant:s,onClick:function(e){e.stopPropagation(),t(e)},className:r,children:l||o})})};var h=n(46018),m=n(96486),f=n.n(m),g=n(41248),v=n(29874);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const y=function(e){var t,n,r,a=e.row,s=b(i.useState(!1),2),l=s[0],m=s[1],x=b(i.useState(""),2),y=(x[0],x[1],b(i.useState(""),2)),_=y[0],j=y[1],w=b((0,h.X)(),2),k=w[0],N=w[1].isLoading,S=(0,g.I0)(),C=function(){return m(!1)},A=f().includes([5],null===(t=window)||void 0===t||null===(n=t.Laravel)||void 0===n||null===(r=n.user)||void 0===r?void 0:r.role_id),R=function(e){var t={status:e,report_id:null==a?void 0:a.id,admin_comment:_};_&&k(t).unwrap().then((function(t){200===t.status&&(S((0,v.ee)({id:null==a?void 0:a.id,status:e})),C())}))},I="approved"===(null==a?void 0:a.status)?"success":"tertiary",E="approved"===(null==a?void 0:a.status)?"Resoved":"pending"===(null==a?void 0:a.status)?"Resove":f().startCase(null==a?void 0:a.status),L="pending"===(null==a?void 0:a.status)?"badge-primary":"approved"===(null==a?void 0:a.status)?"badge-success":"badge-warning";return(0,c.jsxs)("div",{children:[A&&(0,c.jsx)("span",{className:"badge ".concat(L),children:null==a?void 0:a.status}),!A&&(0,c.jsxs)(i.Fragment,{children:[(0,c.jsx)(d.Z,{onClick:function(){return"pending"===(null==a?void 0:a.status)&&void m(!0)},variant:I,className:"denied"===(null==a?void 0:a.status)?"sp1_tasks_tbl_report_btn":"",children:E}),(0,c.jsx)(i.Fragment,{children:(0,c.jsx)(o.Z,{isOpen:l,children:(0,c.jsx)("div",{className:"sp1_modal-content-wrapper",children:(0,c.jsxs)("div",{className:"sp1_modal-panel",children:[(0,c.jsxs)("div",{className:"sp1_modal-head",children:[(0,c.jsx)("div",{className:"sp1_modal-title pl-2",children:(0,c.jsx)("strong",{children:"Report Details"})}),(0,c.jsx)(d.Z,{onClick:C,"aria-label":"ModalClose",variant:"tertiary",className:"sp1_modal-close",children:(0,c.jsx)("i",{className:"fa-solid fa-xmark"})})]}),(0,c.jsxs)("div",{className:"sp1_modal-body p-3",children:[(0,c.jsx)("div",{className:"ck-editor-holder",children:(0,c.jsx)(u.Z,{onChange:function(e,t){var n=t.getData();j(n)},placeholder:"Write your comment here!"})}),(0,c.jsx)("div",{className:"mt-3 d-flex align-items-center justify-content-end py-4",children:(0,c.jsxs)("div",{className:"ml-auto d-flex align-items-center w-fit",style:{gap:"10px"},children:[(0,c.jsx)(p,{variant:"success",title:"Approve & Close",onClick:function(){return R("approved")},isLoading:N,className:"ml-auto mr-2"}),!N&&(0,c.jsx)(p,{title:"Deny & Close",onClick:function(){return R("denied")},isLoading:N,className:"deny_button"})]})})]})]})})})})]})]})};var j=n(57046);function w(){return f().times(5,(function(e){return(0,c.jsxs)("tr",{className:"sp1_tasks_tr",children:[(0,c.jsx)("td",{className:"sp1_tasks_td",children:(0,c.jsx)(j.V,{width:"50px",height:"14px",className:"mb-1"})}),(0,c.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,c.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,c.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,c.jsxs)("td",{className:"sp1_tasks_td d-flex align-items-center",children:[(0,c.jsx)(j.V,{width:"24px",height:"24px",type:"circle",className:"mb-1 mr-2"}),(0,c.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})]}),(0,c.jsxs)("td",{className:"sp1_tasks_td",children:[(0,c.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,c.jsx)(j.V,{width:"60%",height:"13px",className:"mb-1"})]}),(0,c.jsxs)("td",{className:"sp1_tasks_td",children:[(0,c.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,c.jsx)(j.V,{width:"100%",height:"13px",className:"mb-1"}),(0,c.jsx)(j.V,{width:"40%",height:"13px",className:"mb-1"})]}),(0,c.jsx)("td",{className:"sp1_tasks_td",children:(0,c.jsx)(j.V,{width:"80px",height:"13px",className:"mb-1"})}),(0,c.jsx)("td",{className:"sp1_tasks_td",children:(0,c.jsx)(j.V,{width:"80px",height:"20px",className:"mb-1"})})]},e)}))}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],s=!0,l=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){l=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(l)throw a}}return i}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const A=function(e){var t=e.reports,n=void 0===t?[]:t,o=(e.task,e.search),d=e.tableName,u=void 0===d?"sp1-table":d,p=e.isLoading,h=void 0===p||p,m=N(i.useState(k(n)),2),f=m[0],g=m[1],v=N(i.useState([]),2),b=v[0],x=v[1],j=N(i.useState({pageIndex:0,pageSize:10}),2),S=j[0],C=S.pageIndex,A=S.pageSize,R=j[1],I=i.useMemo((function(){return[{id:"serial_no",header:"Serial No.",accessorKey:"id",cell:function(e){return e.getValue()}},{id:"report_issuer",header:"Report Issuer",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)("span",{children:(0,c.jsx)(l.Z,{url:"/account/employees/".concat(null==n?void 0:n.added_by),name:null==n?void 0:n.report_issue_added_by,avatar:null==n?void 0:n.report_issue_added_by_avatar})})}},{id:"accountable_individual",header:"Accountable Individual",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)("span",{children:(0,c.jsx)(l.Z,{url:"/account/employees/".concat(null==n?void 0:n.person),name:null==n?void 0:n.responsible_person_name,avatar:null==n?void 0:n.responsible_person_avatar})})}},{id:"report_reason",header:"Report Reason",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)("span",{children:null==n?void 0:n.reason})}},{id:"report_reason_details",header:"Report Reason Details",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)("div",{className:"sp1_ck_content",dangerouslySetInnerHTML:{__html:null==n?void 0:n.comment}})}},{id:"pre_reported",header:"Previously Reported",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)("span",{children:null==n?void 0:n.previousNotedIssue})}},{id:"action",header:"Action",cell:function(e){var t=e.row,n=null==t?void 0:t.original;return(0,c.jsx)(y,{row:n})}}]})),E=N(i.useState(k(I)),1)[0],L=N(i.useState(_.map(E,"id")),2),T=L[0],M=L[1],V=i.useMemo((function(){return{pageIndex:C,pageSize:A}}),[C,A]);i.useEffect((function(){g(k(n))}),[n]);var O=(0,r.b7)({data:f,columns:E,state:{sorting:b,columnOrder:T,pagination:V,tableName:u,globalFilter:o},onPaginationChange:R,onSortingChange:x,onColumnOrderChange:M,getCoreRowModel:(0,a.sC)(),getPaginationRowModel:(0,a.G_)(),getFilteredRowModel:(0,a.vL)(),getSortedRowModel:(0,a.tj)()});return(0,c.jsx)("div",{className:"sp1_tasks_table_wrapper sp1_tasks_report_table_wrapper",children:(0,c.jsxs)("table",{className:"sp1_tasks_table sp1_tasks_report_table",children:[(0,c.jsx)("thead",{className:"sp1_tasks_thead",children:O.getHeaderGroups().map((function(e){return(0,c.jsx)("tr",{className:"sp1_tasks_tr",children:e.headers.map((function(e){return(0,c.jsx)(s.d,{header:e,table:O,className:"sp1_tasks_report_th"},e.id)}))},e.id)}))}),(0,c.jsxs)("tbody",{className:"sp1_tasks_tbody",children:[h&&(0,c.jsx)(w,{}),!h&&O.getRowModel().rows.map((function(e){return(0,c.jsx)("tr",{className:"sp1_tasks_tr",children:e.getVisibleCells().map((function(e){return(0,c.jsx)("td",{className:"px-2 sp1_tasks_td sp1_tasks_report_td",children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))]})]})})}}}]);
//# sourceMappingURL=90.js.map